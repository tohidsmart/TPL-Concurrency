### How the  program is designed
##### This program is designed based on the producer-consumer pattern and it is implemented using .Net TPL Dataflow library 

### Solution structure 
##### The solution is divided into different projects 
1. FlightData.Consumer 
	* This project is the client and entry point of the solution.It is observing the input folder using FileSystemWatcher class. It builds data flow pipeline and process the data concurrently using a timer.
2. FlightData.DataFlow
   * This project provides TPL dataflow blocks. Data flow blocks to read files, deserialize content, transform content and write it to destination folders.
   The consumer creates the mesh pipeline using this block and executes the pipeline.
3. FlightData.Service
	* This project provides services like data validation, utilities and serialization.The notable service is data validation which classifies the content into Curated and Exception categories 
4. FlightData.Entities
	* This project provides entity classes to the entire design. Entities for base event data, concrete events like departure, arrival etc.
5. FlightData.Producer 
	* This simple project is the producer of solution and randomly generates valid and invalid data and writes it to Input folder.


### How to execute the entire pipeline 

1. Run the Producer as a separate job from _FlightData.Producer\bin\Release\netcoreapp2.1_ folder  using following command
   
 ``` dotnet.exe .\FlightData.Producer.dll ```

2. Run the Consumer either from visual studio or from _FlightData.Consumer\bin\Release\netcoreapp2.1_ folder using following command 

``` dotnet.exe .\FlightData.Consumer.dll ```

Once consumer started, it will start to listen for files generated by producer. 
It will prost the files to the pipeline and each block of pipeline starts to act concurrently. 

### Artifacts

The artifact folders paths are as follow 

1. Input : _FlightData.Consumer\ProcessRoot\Input_
	* The producer writes to this folder
2. Raw : _FlightData.Consumer\ProcessRoot\RAW_
	* The raw files are created in this folder 
3. Curated : _FlightData.Consumer\ProcessRoot\Curated_
   * Valid Arrival and Deprature single events are written as a separate file in this folder.
4. Exception : _FlightData.Consumer\ProcessRoot\Exception_
	Invalid Arrival and Departure single events are written as a separate file in this folder.
5. Logs : In the root folder 
   * Log files are created per minute and each file can contain a number of batch details. 

